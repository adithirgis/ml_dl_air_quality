---
title: "DL model details"
author: "Adithi R. Upadhya"
date: "05/10/2021"
output: html_document
---

# dl_grid

```{r echo = FALSE, eval = FALSE}
H2O Grid Details
================

Grid ID: dl_grid 
Used hyper parameters: 
  -  activation 
  -  epochs 
  -  epsilon 
  -  hidden 
  -  input_dropout_ratio 
  -  l1 
  -  l2 
  -  max_w2 
  -  momentum_stable 
  -  momentum_start 
  -  rate 
  -  rate_annealing 
  -  rho 
Number of models: 16 
Number of failed models: 0 

Hyper-Parameter Search Summary: ordered by increasing mse
             activation    epochs epsilon               hidden input_dropout_ratio
1                  Tanh 304.17671 0.00000     [50, 50, 50, 50]             0.20000
2             Rectifier 206.99064 0.00000     [30, 30, 30, 30]             0.10000
3                  Tanh  45.60100 0.00000     [50, 50, 50, 50]             0.00000
4     MaxoutWithDropout  61.37043 0.00000 [100, 100, 100, 100]             0.00000
5  RectifierWithDropout 305.98860 0.00000     [30, 30, 30, 30]             0.10000
6       TanhWithDropout 487.02934 0.00000     [50, 50, 50, 50]             0.10000
7       TanhWithDropout 305.98860 0.00000     [30, 30, 30, 30]             0.10000
8  RectifierWithDropout 206.99064 0.00000 [100, 100, 100, 100]             0.00000
9       TanhWithDropout 107.99620 0.00000     [30, 30, 30, 30]             0.20000
10    MaxoutWithDropout   4.56472 0.00000     [30, 30, 30, 30]             0.00000
11    MaxoutWithDropout  53.99546 0.00000      [5, 5, 5, 5, 5]             0.10000
12    MaxoutWithDropout  40.50331 0.00000      [5, 5, 5, 5, 5]             0.10000
13      TanhWithDropout 404.99981 0.00000      [5, 5, 5, 5, 5]             0.20000
14 RectifierWithDropout 229.54634 0.00000      [5, 5, 5, 5, 5]             0.10000
15 RectifierWithDropout 504.88741 0.00000      [5, 5, 5, 5, 5]             0.10000
16      TanhWithDropout 100.95753 0.00010 [100, 100, 100, 100]             0.10000
        l1      l2                                        max_w2 momentum_stable
1  0.00010 0.00001                                    1000.00000         0.99000
2  0.00010 0.00001                                      10.00000         0.99000
3  0.00010 0.00000                                    1000.00000         0.99000
4  0.00010 0.00000                                      10.00000         0.99000
5  0.00000 0.00001 340282349999999991754788743781432688640.00000         0.99000
6  0.00000 0.00001                                       1.00000         0.50000
7  0.00010 0.00000                                     100.00000         0.50000
8  0.00001 0.00000                                     100.00000         0.99000
9  0.00000 0.00010                                     100.00000         0.00000
10 0.00001 0.00010 340282349999999991754788743781432688640.00000         0.00000
11 0.00001 0.00000 340282349999999991754788743781432688640.00000         0.99000
12 0.00000 0.00010 340282349999999991754788743781432688640.00000         0.99000
13 0.00010 0.00000                                    1000.00000         0.99000
14 0.00010 0.00000                                    1000.00000         0.99000
15 0.00000 0.00000                                    1000.00000         0.99000
16 0.00000 0.00000                                     100.00000         0.00000
   momentum_start    rate rate_annealing     rho        model_ids         mse
1         0.00000 0.00100        0.00000 0.95000  dl_grid_model_6   478.60450
2         0.50000 0.00000        0.00000 0.99000  dl_grid_model_8   555.31673
3         0.00000 0.00100        0.00000 0.95000 dl_grid_model_13   753.03835
4         0.50000 1.00000        0.00000 0.99900 dl_grid_model_12  2486.52472
5         0.50000 0.00100        0.00000 0.90000  dl_grid_model_3  2685.41380
6         0.50000 0.00500        0.00000 0.99000  dl_grid_model_5  2908.81102
7         0.50000 1.00000        0.00000 0.95000 dl_grid_model_10  3174.52428
8         0.50000 0.00500        0.00000 0.95000  dl_grid_model_7  3734.62973
9         0.50000 0.00100        0.00000 0.95000  dl_grid_model_9  3865.76077
10        0.50000 0.00500        0.00000 0.90000 dl_grid_model_16  4317.63030
11        0.00000 0.00500        0.00000 0.90000 dl_grid_model_11  6141.41903
12        0.00000 0.00100        0.00000 0.99000 dl_grid_model_15  6345.31310
13        0.00000 0.00000        0.00000 0.99900  dl_grid_model_1  6855.41724
14        0.50000 0.00100        0.00000 0.99000 dl_grid_model_14  7191.57629
15        0.50000 0.00100        0.00000 0.95000  dl_grid_model_2 10312.58494
16        0.50000 0.00100        0.00000 0.99000  dl_grid_model_4 47098.76635
```

# grid_perf

```{r echo = FALSE, eval = FALSE}
H2O Grid Details
================

Grid ID: dl_grid 
Used hyper parameters: 
  -  activation 
  -  epochs 
  -  epsilon 
  -  hidden 
  -  input_dropout_ratio 
  -  l1 
  -  l2 
  -  max_w2 
  -  momentum_stable 
  -  momentum_start 
  -  rate 
  -  rate_annealing 
  -  rho 
Number of models: 16 
Number of failed models: 0 

Hyper-Parameter Search Summary: ordered by increasing mse
             activation    epochs epsilon               hidden input_dropout_ratio
1                  Tanh 304.17671 0.00000     [50, 50, 50, 50]             0.20000
2             Rectifier 206.99064 0.00000     [30, 30, 30, 30]             0.10000
3                  Tanh  45.60100 0.00000     [50, 50, 50, 50]             0.00000
4     MaxoutWithDropout  61.37043 0.00000 [100, 100, 100, 100]             0.00000
5  RectifierWithDropout 305.98860 0.00000     [30, 30, 30, 30]             0.10000
6       TanhWithDropout 487.02934 0.00000     [50, 50, 50, 50]             0.10000
7       TanhWithDropout 305.98860 0.00000     [30, 30, 30, 30]             0.10000
8  RectifierWithDropout 206.99064 0.00000 [100, 100, 100, 100]             0.00000
9       TanhWithDropout 107.99620 0.00000     [30, 30, 30, 30]             0.20000
10    MaxoutWithDropout   4.56472 0.00000     [30, 30, 30, 30]             0.00000
11    MaxoutWithDropout  53.99546 0.00000      [5, 5, 5, 5, 5]             0.10000
12    MaxoutWithDropout  40.50331 0.00000      [5, 5, 5, 5, 5]             0.10000
13      TanhWithDropout 404.99981 0.00000      [5, 5, 5, 5, 5]             0.20000
14 RectifierWithDropout 229.54634 0.00000      [5, 5, 5, 5, 5]             0.10000
15 RectifierWithDropout 504.88741 0.00000      [5, 5, 5, 5, 5]             0.10000
16      TanhWithDropout 100.95753 0.00010 [100, 100, 100, 100]             0.10000
        l1      l2                                        max_w2 momentum_stable
1  0.00010 0.00001                                    1000.00000         0.99000
2  0.00010 0.00001                                      10.00000         0.99000
3  0.00010 0.00000                                    1000.00000         0.99000
4  0.00010 0.00000                                      10.00000         0.99000
5  0.00000 0.00001 340282349999999991754788743781432688640.00000         0.99000
6  0.00000 0.00001                                       1.00000         0.50000
7  0.00010 0.00000                                     100.00000         0.50000
8  0.00001 0.00000                                     100.00000         0.99000
9  0.00000 0.00010                                     100.00000         0.00000
10 0.00001 0.00010 340282349999999991754788743781432688640.00000         0.00000
11 0.00001 0.00000 340282349999999991754788743781432688640.00000         0.99000
12 0.00000 0.00010 340282349999999991754788743781432688640.00000         0.99000
13 0.00010 0.00000                                    1000.00000         0.99000
14 0.00010 0.00000                                    1000.00000         0.99000
15 0.00000 0.00000                                    1000.00000         0.99000
16 0.00000 0.00000                                     100.00000         0.00000
   momentum_start    rate rate_annealing     rho        model_ids         mse
1         0.00000 0.00100        0.00000 0.95000  dl_grid_model_6   478.60450
2         0.50000 0.00000        0.00000 0.99000  dl_grid_model_8   555.31673
3         0.00000 0.00100        0.00000 0.95000 dl_grid_model_13   753.03835
4         0.50000 1.00000        0.00000 0.99900 dl_grid_model_12  2486.52472
5         0.50000 0.00100        0.00000 0.90000  dl_grid_model_3  2685.41380
6         0.50000 0.00500        0.00000 0.99000  dl_grid_model_5  2908.81102
7         0.50000 1.00000        0.00000 0.95000 dl_grid_model_10  3174.52428
8         0.50000 0.00500        0.00000 0.95000  dl_grid_model_7  3734.62973
9         0.50000 0.00100        0.00000 0.95000  dl_grid_model_9  3865.76077
10        0.50000 0.00500        0.00000 0.90000 dl_grid_model_16  4317.63030
11        0.00000 0.00500        0.00000 0.90000 dl_grid_model_11  6141.41903
12        0.00000 0.00100        0.00000 0.99000 dl_grid_model_15  6345.31310
13        0.00000 0.00000        0.00000 0.99900  dl_grid_model_1  6855.41724
14        0.50000 0.00100        0.00000 0.99000 dl_grid_model_14  7191.57629
15        0.50000 0.00100        0.00000 0.95000  dl_grid_model_2 10312.58494
16        0.50000 0.00100        0.00000 0.99000  dl_grid_model_4 47098.76635

```

# best_model

```{r  echo = FALSE, eval = FALSE}
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 348.3 KB, 2,738,693 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.010067 0.099748 0.000000   -0.000257
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.030449 0.115648 0.000000    0.002341
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.143694 0.222847 0.000000    0.003491
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.220460 0.245363 0.000000    0.002051
6     6     1 Linear      NA 0.000100 0.000010  0.098443 0.172674 0.000000    0.044338
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.066034 -0.025344 0.146948
3   0.098971 -0.026728 0.152967
4   0.090110  0.022617 0.131074
5   0.085195  0.010617 0.200311
6   0.199013  0.416338 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on full training frame **

MSE:  368.3028
RMSE:  19.19122
MAE:  12.64529
RMSLE:  0.1797891
Mean Residual Deviance :  368.3028



H2ORegressionMetrics: deeplearning
** Reported on cross-validation data. **
** 10-fold cross-validation on training data (Metrics computed for combined holdout predictions) **

MSE:  478.6045
RMSE:  21.87703
MAE:  14.7938
RMSLE:  NaN
Mean Residual Deviance :  478.6045


Cross-Validation Metrics Summary: 
                             mean        sd cv_1_valid cv_2_valid cv_3_valid cv_4_valid
mae                     14.802911  0.695532  14.088185  15.274706  14.527333  15.159756
mean_residual_deviance 478.603060 51.735720 433.890260 552.781070 450.555600 541.362730
mse                    478.603060 51.735720 433.890260 552.781070 450.555600 541.362730
r2                       0.929278  0.009929   0.939498   0.917003   0.929251   0.917393
residual_deviance      478.603060 51.735720 433.890260 552.781070 450.555600 541.362730
rmse                    21.848250  1.181827  20.830032  23.511297  21.226295  23.267202
rmsle                    0.218740  0.009716   0.217602   0.223142         NA         NA
                       cv_5_valid cv_6_valid cv_7_valid cv_8_valid cv_9_valid
mae                     14.968562  14.205697  15.330175  16.163624  13.974793
mean_residual_deviance 476.950260 467.338780 503.767900 530.435000 404.783600
mse                    476.950260 467.338780 503.767900 530.435000 404.783600
r2                       0.928366   0.937385   0.926683   0.916723   0.943381
residual_deviance      476.950260 467.338780 503.767900 530.435000 404.783600
rmse                    21.839191  21.618020  22.444775  23.031174  20.119234
rmsle                    0.223552   0.213991   0.215766   0.236114   0.201921
                       cv_10_valid
mae                      14.336273
mean_residual_deviance  424.165370
mse                     424.165370
r2                        0.937093
residual_deviance       424.165370
rmse                     20.595276
rmsle                     0.217828
```


# scoreHistory

```{r echo = FALSE, eval = FALSE}
Scoring History: 
            timestamp          duration training_speed   epochs iterations
1 2021-11-28 14:31:36         0.000 sec             NA  0.00000          0
2 2021-11-28 14:31:39 54 min 49.383 sec  23475 obs/sec  7.47153          1
3 2021-11-28 14:31:45 54 min 55.487 sec  22563 obs/sec 22.42980          3
4 2021-11-28 14:31:51 55 min  1.460 sec  22584 obs/sec 37.37745          5
5 2021-11-28 14:31:57 55 min  7.699 sec  22301 obs/sec 52.30977          7
        samples training_rmse training_deviance training_mae training_r2
1      0.000000            NA                NA           NA          NA
2  66788.000000      37.81191        1429.74017     26.18922     0.79016
3 200500.000000      23.49236         551.89093     16.49791     0.91900
4 334117.000000      22.11099         488.89610     15.58958     0.92825
5 467597.000000      23.95547         573.86465     16.37689     0.91578

---
             timestamp          duration training_speed    epochs iterations
17 2021-11-28 14:33:09 56 min 19.334 sec  22553 obs/sec 231.64157         31
18 2021-11-28 14:33:15 56 min 25.301 sec  22558 obs/sec 246.58362         33
19 2021-11-28 14:33:21 56 min 31.285 sec  22560 obs/sec 261.53865         35
20 2021-11-28 14:33:27 56 min 37.252 sec  22563 obs/sec 276.47075         37
21 2021-11-28 14:33:33 56 min 43.185 sec  22574 obs/sec 291.42253         39
22 2021-11-28 14:33:39 56 min 49.136 sec  22582 obs/sec 306.37577         41
          samples training_rmse training_deviance training_mae training_r2
17 2070644.000000      20.04310         401.72581     13.32251     0.94104
18 2204211.000000      20.79826         432.56757     14.23610     0.93651
19 2337894.000000      21.33692         455.26413     14.93341     0.93318
20 2471372.000000      19.73087         389.30729     13.48372     0.94286
21 2605026.000000      19.56517         382.79607     13.25851     0.94382
22 2738693.000000      19.19122         368.30281     12.64529     0.94595
```


# cv_models

```{r echo = FALSE, eval = FALSE}
[[1]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_1 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,454,579 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.010000 0.099752 0.000000    0.000011
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.011003 0.068850 0.000000    0.000291
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.170506 0.233246 0.000000    0.003173
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.244333 0.246884 0.000000    0.000459
6     6     1 Linear      NA 0.000100 0.000010  0.087509 0.159061 0.000000    0.043038
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065602 -0.016556 0.102079
3   0.100011  0.013960 0.112138
4   0.084686  0.011685 0.092031
5   0.081929  0.013821 0.183255
6   0.196064  0.332699 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  417.2577
RMSE:  20.42689
MAE:  13.71606
RMSLE:  NaN
Mean Residual Deviance :  417.2577


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  433.8902
RMSE:  20.83003
MAE:  14.08819
RMSLE:  0.2176023
Mean Residual Deviance :  433.8902




[[2]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_2 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,442,370 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.009993 0.099752 0.000000   -0.000202
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.018290 0.090809 0.000000    0.000565
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.085504 0.189187 0.000000    0.001535
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.141861 0.220898 0.000000    0.000350
6     6     1 Linear      NA 0.000100 0.000010  0.048302 0.109954 0.000000    0.033648
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065350 -0.016345 0.105284
3   0.103952 -0.009429 0.085377
4   0.092410  0.014369 0.109802
5   0.086762  0.002845 0.151725
6   0.199257  0.296849 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  426.3076
RMSE:  20.64722
MAE:  14.04386
RMSLE:  0.2095201
Mean Residual Deviance :  426.3076


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  552.7811
RMSE:  23.5113
MAE:  15.27471
RMSLE:  0.2231415
Mean Residual Deviance :  552.7811




[[3]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_3 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,434,802 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.009987 0.099752 0.000000   -0.000280
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.010792 0.068796 0.000000    0.001039
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.109770 0.206487 0.000000    0.002245
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.166280 0.232492 0.000000    0.000141
6     6     1 Linear      NA 0.000100 0.000010  0.053459 0.121714 0.000000    0.025556
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065387 -0.021772 0.105665
3   0.105419 -0.008118 0.061625
4   0.092031  0.008605 0.093037
5   0.086543 -0.008302 0.145192
6   0.194989  0.287914 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  442.4915
RMSE:  21.03548
MAE:  14.34273
RMSLE:  NaN
Mean Residual Deviance :  442.4915


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  450.5556
RMSE:  21.2263
MAE:  14.52733
RMSLE:  NaN
Mean Residual Deviance :  450.5556




[[4]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_4 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,446,021 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.009992 0.099752 0.000000   -0.000107
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.010487 0.068202 0.000000    0.000505
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.060959 0.163338 0.000000    0.002786
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.133060 0.219047 0.000000    0.000053
6     6     1 Linear      NA 0.000100 0.000010  0.075812 0.163922 0.000000    0.026065
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.064868 -0.023142 0.105363
3   0.106804 -0.007008 0.079561
4   0.092967  0.012716 0.106891
5   0.093003  0.004025 0.173936
6   0.199937  0.276172 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  510.7854
RMSE:  22.60056
MAE:  15.33478
RMSLE:  NaN
Mean Residual Deviance :  510.7854


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  541.3627
RMSE:  23.2672
MAE:  15.15976
RMSLE:  NaN
Mean Residual Deviance :  541.3627




[[5]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_5 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,469,476 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.009988 0.099753 0.000000   -0.000048
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.000734 0.001024 0.000000   -0.000001
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.042124 0.133147 0.000000    0.002475
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.115529 0.209809 0.000000   -0.000821
6     6     1 Linear      NA 0.000100 0.000010  0.065859 0.151184 0.000000    0.029036
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.064724 -0.021457 0.098958
3   0.110279 -0.003458 0.072996
4   0.098885 -0.004390 0.107583
5   0.096581  0.000439 0.127218
6   0.199421  0.222013 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  459.56
RMSE:  21.43735
MAE:  14.61051
RMSLE:  NaN
Mean Residual Deviance :  459.56


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  476.9503
RMSE:  21.83919
MAE:  14.96856
RMSLE:  0.2235521
Mean Residual Deviance :  476.9503




[[6]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_6 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,424,363 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.010024 0.099750 0.000000   -0.000118
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.020222 0.098230 0.000000    0.000858
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.127587 0.215892 0.000000    0.003483
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.205688 0.243370 0.000000   -0.000120
6     6     1 Linear      NA 0.000100 0.000010  0.085927 0.154918 0.000000    0.030189
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065670 -0.020619 0.107707
3   0.102219 -0.013885 0.106372
4   0.087120  0.010643 0.107267
5   0.082464 -0.000097 0.159377
6   0.200701  0.331087 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  456.6372
RMSE:  21.36907
MAE:  14.12349
RMSLE:  NaN
Mean Residual Deviance :  456.6372


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  467.3388
RMSE:  21.61802
MAE:  14.2057
RMSLE:  0.2139914
Mean Residual Deviance :  467.3388




[[7]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_7 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,453,721 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.009973 0.099754 0.000000   -0.000220
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.000831 0.001451 0.000000    0.000079
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.123979 0.213317 0.000000    0.002487
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.191050 0.239793 0.000000    0.000026
6     6     1 Linear      NA 0.000100 0.000010  0.078123 0.169693 0.000000    0.037221
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065704 -0.007756 0.104237
3   0.100041  0.009470 0.084814
4   0.086875  0.013875 0.119595
5   0.078999  0.000975 0.157597
6   0.196551  0.341978 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  433.381
RMSE:  20.81781
MAE:  13.82343
RMSLE:  0.2055442
Mean Residual Deviance :  433.381


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  503.7679
RMSE:  22.44477
MAE:  15.33018
RMSLE:  0.2157661
Mean Residual Deviance :  503.7679




[[8]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_8 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,452,478 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.010032 0.099750 0.000000    0.000106
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.000714 0.000826 0.000000    0.000423
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.072190 0.179793 0.000000    0.002302
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.141020 0.222860 0.000000   -0.001352
6     6     1 Linear      NA 0.000100 0.000010  0.055339 0.124687 0.000000    0.031010
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065089 -0.039152 0.102156
3   0.106278 -0.005154 0.098274
4   0.092251  0.008574 0.095345
5   0.089993  0.002105 0.150001
6   0.194614  0.253981 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  462.0731
RMSE:  21.49589
MAE:  14.91764
RMSLE:  0.2263597
Mean Residual Deviance :  462.0731


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  530.435
RMSE:  23.03117
MAE:  16.16362
RMSLE:  0.2361145
Mean Residual Deviance :  530.435




[[9]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_9 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,434,773 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.010010 0.099752 0.000000   -0.000276
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.010808 0.066692 0.000000    0.000452
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.099981 0.200062 0.000000    0.002718
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.190089 0.239216 0.000000    0.000606
6     6     1 Linear      NA 0.000100 0.000010  0.094412 0.173937 0.000000    0.038282
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065531 -0.040755 0.115601
3   0.100491 -0.009754 0.094265
4   0.093467  0.020846 0.119006
5   0.086461  0.001702 0.182878
6   0.202417  0.369770 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  375.8574
RMSE:  19.38704
MAE:  13.42771
RMSLE:  0.1972956
Mean Residual Deviance :  375.8574


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  404.7836
RMSE:  20.11923
MAE:  13.97479
RMSLE:  0.2019212
Mean Residual Deviance :  404.7836




[[10]]
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  dl_grid_model_6_cv_10 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 349.3 KB, 2,458,727 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.009991 0.099753 0.000000    0.000005
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.000710 0.000751 0.000000   -0.000050
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.062809 0.167865 0.000000    0.002237
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.151399 0.227672 0.000000    0.000053
6     6     1 Linear      NA 0.000100 0.000010  0.060738 0.122642 0.000000    0.039632
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.065515 -0.013357 0.109999
3   0.106364 -0.006859 0.102647
4   0.087738  0.006812 0.108946
5   0.088314  0.010669 0.163728
6   0.193396  0.340860 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on temporary training frame with 8939 samples **

MSE:  423.5063
RMSE:  20.57927
MAE:  13.80699
RMSLE:  0.198374
Mean Residual Deviance :  423.5063


H2ORegressionMetrics: deeplearning
** Reported on validation data. **
** Metrics reported on full validation frame **

MSE:  424.1654
RMSE:  20.59528
MAE:  14.33627
RMSLE:  0.2178278
Mean Residual Deviance :  424.1654
```

# best_model_perf

```{r echo = FASLE, eval = FALSE}
H2ORegressionMetrics: deeplearning

MSE:  405.137
RMSE:  20.12801
MAE:  13.29381
RMSLE:  0.1875532
Mean Residual Deviance :  405.137

```


# h2o.mse(best_model_perf) %>% sqrt()

```{r echo = FALSE, eval = FALSE}
20.13
```

# model_dl 

```{r echo = FALSE, eval = FALSE}
Model Details:
==============

H2ORegressionModel: deeplearning
Model ID:  DeepLearning_model_R_1638086788586_3 
Status of Neuron Layers: predicting PM2.5, regression, gaussian distribution, Quadratic loss, 28,751 weights/biases, 348.8 KB, 187,719 training samples, mini-batch size 1
  layer units   type dropout       l1       l2 mean_rate rate_rms momentum mean_weight
1     1   420  Input 20.00 %       NA       NA        NA       NA       NA          NA
2     2    50   Tanh  0.00 % 0.000100 0.000010  0.316672 0.292803 0.000000    0.004493
3     3    50   Tanh  0.00 % 0.000100 0.000010  0.802620 0.364580 0.000000   -0.001662
4     4    50   Tanh  0.00 % 0.000100 0.000010  0.932202 0.184136 0.000000   -0.002348
5     5    50   Tanh  0.00 % 0.000100 0.000010  0.877130 0.238867 0.000000   -0.001732
6     6     1 Linear      NA 0.000100 0.000010  0.076033 0.037974 0.000000   -0.023472
  weight_rms mean_bias bias_rms
1         NA        NA       NA
2   0.131996 -0.057355 0.211849
3   0.119494 -0.029433 0.169763
4   0.059657 -0.026864 0.132187
5   0.051770 -0.009771 0.119226
6   0.159945  1.089937 0.000000


H2ORegressionMetrics: deeplearning
** Reported on training data. **
** Metrics reported on full training frame **

MSE:  539.9504
RMSE:  23.23683
MAE:  15.95016
RMSLE:  0.2244578
Mean Residual Deviance :  539.9504



H2ORegressionMetrics: deeplearning
** Reported on cross-validation data. **
** 10-fold cross-validation on training data (Metrics computed for combined holdout predictions) **

MSE:  500.7326
RMSE:  22.37706
MAE:  15.35283
RMSLE:  0.2373036
Mean Residual Deviance :  500.7326


Cross-Validation Metrics Summary: 
                             mean        sd cv_1_valid cv_2_valid cv_3_valid cv_4_valid
mae                     15.366274  0.830617  14.579464  15.196660  15.596466  15.089310
mean_residual_deviance 501.167660 34.539124 466.007100 511.089840 521.006600 495.810900
mse                    501.167660 34.539124 466.007100 511.089840 521.006600 495.810900
r2                       0.926006  0.007478   0.935020   0.923262   0.918188   0.924344
residual_deviance      501.167660 34.539124 466.007100 511.089840 521.006600 495.810900
rmse                    22.374434  0.783440  21.587198  22.607296  22.825570  22.266811
rmsle                    0.236905  0.017255   0.218333   0.240398   0.247608   0.234571
                       cv_5_valid cv_6_valid cv_7_valid cv_8_valid cv_9_valid
mae                     15.624565  14.092607  15.579420  14.653458  16.529152
mean_residual_deviance 486.033420 428.110380 548.536250 506.193080 529.944150
mse                    486.033420 428.110380 548.536250 506.193080 529.944150
r2                       0.927001   0.942641   0.920168   0.920528   0.925874
residual_deviance      486.033420 428.110380 548.536250 506.193080 529.944150
rmse                    22.046165  20.690828  23.420850  22.498735  23.020515
rmsle                    0.239498   0.224156   0.216266   0.227574   0.245777
                       cv_10_valid
mae                      16.721640
mean_residual_deviance  518.944900
mse                     518.944900
r2                        0.923037
residual_deviance       518.944900
rmse                     22.780361
rmsle                     0.274870

```

# variable importance for model_dl

```{r eval = FALSE, echo = FALSE}
Variable Importances: 
  variable relative_importance scaled_importance percentage
1  day.107            1.000000          1.000000   0.005508
2   day.81            0.980390          0.980390   0.005400
3  day.106            0.887769          0.887769   0.004890
4  day.316            0.864134          0.864134   0.004760
5  day.145            0.860576          0.860576   0.004740

---
                    variable relative_importance scaled_importance percentage
415                    Press            0.176907          0.176907   0.000974
416                      CWV            0.160758          0.160758   0.000886
417                      BLH            0.145514          0.145514   0.000802

```

